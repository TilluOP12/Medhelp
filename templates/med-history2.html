<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical History</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #e0f7fa, #a7ffeb);
            color: #333;
            padding: 20px;
        }

        .container {
            width: 95%;
            margin: 0 auto;
            max-width: 1400px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-gap: 30px;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: linear-gradient(135deg, #00c853, #00e676);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            color: white;
        }

        .navbar h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .navbar ul {
            display: flex;
            list-style-type: none;
        }

        .navbar ul li {
            margin-right: 20px;
        }

        .navbar ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 1.1rem;
            transition: color 0.3s;
        }

        .navbar ul li a:hover {
            color: #ffeb3b;
        }

        .medical-history-header {
            text-align: center;
            margin-top: 100px;
            margin-bottom: 30px;
        }

        .medical-history-header h2 {
            color: #00c853;
            font-size: 2.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            font-weight: 500;
            font-size: 1.2rem;
            margin-bottom: 10px;
            display: block;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            border-color: #00c853;
            box-shadow: 0 0 5px rgba(0, 200, 83, 0.5);
        }

        .upload-section, .prescribed-tests-section, .medications-section {
            background-color: #fff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .upload-box, .prescribed-box {
            background-color: #f9f9f9;
            padding: 20px;
            border: 1px dashed #00c853;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s;
        }

        .upload-box:hover, .prescribed-box:hover {
            background-color: #e8f5e9;
            border: 1px solid #00c853;
        }

        .btn-submit {
            background: linear-gradient(135deg, #00c853, #00e676);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .btn-submit:hover {
            background: linear-gradient(135deg, #00e676, #69f0ae);
        }

        .comment-section {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .comment-section h3 {
            color: #00c853;
            margin-bottom: 15px;
        }

        .comment-section textarea {
            width: 100%;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 1rem;
        }

        .input-container {
            margin-top: 50px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            max-width: 600px;
        }

        .btn {
            background-color: #00c853;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .btn:hover {
            background-color: #69f0ae;
        }

        .pdf-preview iframe {
            width: 100%;
            height: 400px;
            border: 1px solid #ccc;
            border-radius: 10px;
            margin-top: 20px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <!-- Navbar -->
    <div class="navbar">
        <h1>MedHelp</h1>
        <ul class="nav-links">
            <li><a href="#">Home</a></li>
            <li><a href="#">Medical History</a></li>
            <li><a href="#">Book Appointment</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
        <div class="account">
            <button class="account-btn">âš™</button>
            <div class="dropdown-content">
                <a href="#">My Profile</a>
                <a href="#">Doctor-Signin</a>
                <a href="#">Nearby Doctors</a>
            </div>
        </div>
    </div>

    <!-- Container -->
    <div class="container">
        <!-- Medical History Header -->
        <div class="medical-history-header">
            <h2>Track Your Medical History</h2>
        </div>

        <!-- Medications Section -->
        <div class="medications-section">
            <h3>Medications</h3>
            <div class="upload-box">
                <label for="medical-test-1">Upload Medical Test (PDF):</label>
                <input type="file" id="medical-test-1" name="medical-test[]" accept=".pdf">
            </div>
            <button class="btn-submit">Upload Medication</button>
        </div>

        <!-- Prescribed Tests Section -->
        <div class="prescribed-tests-section">
            <h3>Prescribed Tests</h3>
            <div class="upload-box">
                <label for="medical-test-2">Upload X-Ray Test (PDF):</label>
                <input type="file" id="medical-test-2" name="medical-test[]" accept=".pdf">
            </div>
            <button class="btn-submit">Upload Test</button>
        </div>

    </div>
<script>
    function submitComment() {
        const comment = document.getElementById('commentInput').value;
        if (comment) {
            const commentPreview = document.getElementById('commentPreview');
            document.getElementById('commentText').textContent = comment;
            commentPreview.style.display = 'block';
        }
    }
    let uploadCount = 1;

        function addMore() {
            uploadCount++;
            const uploadSection = document.getElementById('uploadSection');
            const newUploadBox = document.createElement('div');
            newUploadBox.classList.add('upload-box');
            newUploadBox.innerHTML = `
                <label for="medical-test-${uploadCount}">Upload Medical Test (PDF):</label>
                <input type="file" id="medical-test-${uploadCount}" name="medical-test[]" accept=".pdf" onchange="previewPDF(this, 'pdf-preview-${uploadCount}')">
                <p>Upload your latest medical test reports here.</p>
            `;
            const newPreview = document.createElement('div');
            newPreview.classList.add('pdf-preview');
            newPreview.id = `pdf-preview-${uploadCount}`;
            uploadSection.appendChild(newUploadBox);
            uploadSection.appendChild(newPreview);
        }

        function previewPDF(input, previewId) {
        const file = input.files[0];
        if (file && file.type === 'application/pdf') {
            const reader = new FileReader();
            reader.onload = function (e) {
                const iframe = document.createElement('iframe');
                iframe.src = e.target.result;
                iframe.style.width = '100%'; // Ensure the iframe takes up full width
                iframe.style.height = '500px'; // Set height to properly show the content
                iframe.style.border = 'none'; // Optional: Remove border for a cleaner look
                document.getElementById(previewId).innerHTML = ''; // Clear previous content
                document.getElementById(previewId).appendChild(iframe); // Append the new iframe
            };
            reader.readAsDataURL(file);
        } else {
            alert('Please upload a valid PDF.');
        }
    }


    function previewImage(input, previewId) {
        const file = input.files[0];
        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = function (e) {
                const img = document.createElement('img');
                img.src = e.target.result;
                img.style.maxWidth = '100%';
                img.style.borderRadius = '5px';
                document.getElementById(previewId).innerHTML = '';
                document.getElementById(previewId).appendChild(img);
            };
            reader.readAsDataURL(file);
        } else {
            alert('Please upload a valid image.');
        }
    }
        function updateSubmissionStatus(inputId, statusId, fileType) {
        const input = document.getElementById(inputId);
        const status = document.getElementById(statusId);
        if (input.files.length > 0) {
            status.textContent = `${fileType}: Submitted`;
        } else {
            status.textContent = `${fileType}: Not Submitted`;
        }
    }
    function toggleEPrescriptionForm() {
    const ePrescriptionForm = document.getElementById('e-prescription-form');
    if (document.getElementById('use-e-prescription').checked) {
        ePrescriptionForm.style.display = 'block';
    } else {
        ePrescriptionForm.style.display = 'none';
    }
    }
    function toggleEPrescriptionForm2() {
        const ePrescriptionForm = document.getElementById('e-prescription-form');
        if (document.getElementById('use-e-prescription').checked) {
            ePrescriptionForm.style.display = 'block';
        } else {
            ePrescriptionForm.style.display = 'none';
        }
    }
    window.addEventListener('scroll', function () {
        const navbar = document.querySelector('.navbar');
        navbar.classList.toggle('sticky', window.scrollY > 0);
    });


        document.getElementById('medical-test-1').addEventListener('change', function() {
            updateSubmissionStatus('medical-test-1', 'medical-record-status', 'Medical Record');
        });

        document.getElementById('prescription').addEventListener('change', function() {
            updateSubmissionStatus('prescription', 'prescription-status', 'Prescription');
        });
        
    function toggleEPrescriptionForm() {
        const ePrescriptionForm = document.getElementById('e-prescription-form');
        if (document.getElementById('use-e-prescription').checked) {
            ePrescriptionForm.style.display = 'block';
        } else {
            ePrescriptionForm.style.display = 'none';
        }
}
    function addNewProblem() {
        var newDate = document.getElementById('new-date').value;
        var newProblem = document.getElementById('new-problem').value;

        // Ensure both fields are filled
        if (newDate === "" || newProblem === "") {
            alert("Please fill in both the date and problem.");
            return;
        }

    // Format the option value
    var newOptionText = newDate + ' - ' + newProblem;
    var newOption = document.createElement('option');
    newOption.value = newOptionText;
    newOption.text = newOptionText;

    // Add the new option to the dropdown
    var dropdown = document.getElementById('date');
    dropdown.add(newOption);

    // Clear the input fields
    document.getElementById('new-date').value = "";
    document.getElementById('new-problem').value = "";
}
    function uploadFile(fileInputId, apiUrl) {
        const fileInput = document.getElementById(fileInputId);
        const file = fileInput.files[0];

        if (!file) {
            alert('No file selected.');
            return;
        }

        const formData = new FormData();
        formData.append('file', file);
        formData.append('filename', file.name);

        fetch(apiUrl, {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.message) {
                alert(data.message);
            }
        })
        .catch(error => console.error('Error:', error));
    }



</script>


</body>
</html>
